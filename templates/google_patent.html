<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Search Results - Google Patent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
</head>

<body>
    <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="background-color: slategray;">
        <a class="navbar-brand" href="/" style="color: black;">Google Scholar</a>
        <a class="navbar-brand" href="/google_patent" style="color: black;">Google Patents</a>
    </nav> -->
    <div class="container bootstrap snippets bootdey">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="search-form">
                            <div class="input-group">
                                <input type="text" placeholder="Search for patents here..." name="search" id="search"
                                    onkeyup="success()" class="form-control input-lg">
                                <div class="input-group-btn">
                                    <button class="btn btn-lg btn-primary" id="submit" onclick="start()">
                                        Search
                                    </button>
                                </div>
                            </div>
                        </div>
                        <br>
                        <!-- <a><button style="display: none;" id="resultsButton" class="resultsButton" onclick="view_results()">View Results</button></a> -->
                        <div class="progress" style="height: 23px; margin-bottom: 3px;">
                            <div id="dynamic" class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
                        </div>

                        <div class="row">
                            <div class="col-xs-2 text-left">
                                <a href="/google_patent_results_download"><button type="button" class="btn btn-outline-primary downloadButton" style="{{ style }}" id="downloadButton">Download Data</button></a>
                            </div>
                            <div class="col-xs-6 text-right">   
                                <a href="/google_patent_results"><button type="button" class="btn btn-outline-primary resultsButton" style="display: none;" id="resultsButton">View Results</button></a>
                            </div>
                        </div>
                        <!-- <div id="ajax_updated" style="max-height: 684px; overflow: auto; white-space: nowrap; margin-top: 18px;">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">S.No</th>
                                        <th scope="col">Title</th>
                                        <th scope="col">Patent Number</th>
                                        <th scope="col">Abstract</th>
                                        <th scope="col">Classification</th>
                                        <th scope="col">Claims</th>
                                        <th scope="col">Images</th>
                                        <th scope="col">Description</th>
                                        <th scope="col">Background</th>
                                        <th scope="col">Summary</th>
                                        <th scope="col">Technical Field</th>
                                        <th scope="col">Description of the Drawings</th>
                                        <th scope="col">Description of the Embodiments</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div> -->
                        {% if patents %}
                        <div id="ajax_updated" style="max-height: 684px; overflow: auto; white-space: nowrap; margin-top: 18px;">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">S.No</th>
                                        <th scope="col">Title</th>
                                        <th scope="col">Patent Number</th>
                                        <th scope="col">Abstract</th>
                                        <th scope="col">Classification</th>
                                        <th scope="col">Claims</th>
                                        <th scope="col">Images</th>
                                        <th scope="col">Description</th>
                                        <th scope="col">Background</th>
                                        <th scope="col">Summary</th>
                                        <th scope="col">Technical Field</th>
                                        <th scope="col">Description of the Drawings</th>
                                        <th scope="col">Description of the Embodiments</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for p in patents %}
                                        <tr>
                                            <th scope="row">{{p.S_No}}</th>
                                            <td>{{p.Title}}</td>
                                            <td>{{p.Patent_Number}}</td>
                                            <td>{{p.Abstract}}</td>
                                            <td>{{p.Classification}}</td>
                                            <td>{{p.Claims}}</td>
                                            <td>{{p.Images}}</td>
                                            <td>{{p.Description}}</td>
                                            <td>{{p.Background}}</td>
                                            <td>{{p.Summary}}</td>
                                            <td>{{p.Technical_Field}}</td>
                                            <td>{{p.Description_Of_The_Drawings}}</td>
                                            <td>{{p.Description_Of_The_Embodiments}}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style type="text/css">
        body {
            background: #eee;
        }

        .ibox-content {
            background-color: #FFFFFF;
            color: inherit;
            padding: 15px 20px 20px 20px;
            border-color: #E7EAEC;
            border-image: none;
            border-style: solid solid none;
            border-width: 1px 0px;
        }

        .search-form {
            margin-top: 10px;
        }

        .search-result h3 {
            margin-bottom: 0;
            color: #1E0FBE;
        }

        .search-result .search-link {
            color: #006621;
        }

        .search-result p {
            font-size: 16px;
            margin-top: 5px;
        }

        .hr-line-dashed {
            border-top: 1px dashed #E7EAEC;
            color: #ffffff;
            background-color: #ffffff;
            height: 1px;
            margin: 20px 0;
        }

        h2 {
            font-size: 24px;
            font-weight: 100;
        }
        .container{  
        /* text-align: center; */
        padding-top: 50px;
        }
    </style>
    <script>
        function success() {
        if(document.getElementById("search").value==="") { 
                document.getElementById('submit').disabled = true; 
            } else { 
                document.getElementById('submit').disabled = false;
            }
        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1 /jquery.min.js"></script>
    <script>
        function start() {
            search = document.getElementById('search').value
            $.get('/', {search: search}, function(json_response) {
            });
            
            var current_progress = 0;
            
            // new
            var progress = document.getElementsByClassName("progress")[0];
            var resultsButton = document.getElementsByClassName("resultsButton")[0]; //can use ids instead
            var downloadButton = document.getElementsByClassName("downloadButton")[0];
            // end
            
            var interval = setInterval(function() {
                current_progress += 10;
                $("#dynamic")
                .css("width", current_progress + "%")
                .attr("aria-valuenow", current_progress)
                .text(current_progress + "% Complete");
                downloadButton.style.display = "block";
                if (current_progress >= 101) {
                    clearInterval(interval);
                    progress.style.display = "none";
                    resultsButton.style.display = "block";
                }
            }, 4000);
        };

        function view_results() {
            $.get('/google_patent_results', {}, function(json_response) {
                var patents = json_response["patents"]
                if (patents) {
                    for (var i = 0; i < patents.length; i++) {
                        $('tbody').append("<tr><th scope=\"row\">" + patents[i].S_No + "</th><td>" + patents[i].Title + "</td><td>" + patents[i].Patent_Number + "</td><td>" + patents[i].Abstract + "</td><td>" + patents[i].Classification + "</td><td>" + patents[i].Claims + "</td><td>" + patents[i].Images + "</td><td>" + patents[i].Description + "</td><td>" + patents[i].Background + "</td><td>" + patents[i].Summary + "</td><td>" + patents[i].Technical_Field + "</td><td>" + patents[i].Description_Of_The_Drawings + "</td><td>" + patents[i].Description_Of_The_Embodiments + "</td></tr>")
                    }
                }
            });
            document.getElementById("resultsButton").disabled = true;
        };
        
        // function download() {
        //     $.get('/google_patent_results_download', {}, function(json_response) {});
        // };
    </script>
</body>

</html>
